# shopMZ-基于Xampp-PHP的美妆购物商城
![image](https://github.com/Chloe010/shopMZ/assets/129756356/f8e5f67f-8e70-4c6c-a483-231e04c614fb)
### 项目目标
###### 设计一款基于基于PHP的网上购物商城，用户在网站的“首页”进行商品的浏览、在商品详情页查看商品的详细情况并将商品添加进“购物车”、在“购物车”栏进行商品的购买和结算功能、在个人中心修改个人收货地址等基本任务。管理员进行登录、商品分类管理、库存管理、订单管理、上架管理、用户管理、账户管理等基本任务。
###### 总之，通过这个PHP网上商城，用户能够随时随地的享受购物的快感，在日常的工作和生活中，用户都可以在线选择心仪的商品并购买商品。管理员也从中对用户购买商品的全过程起管理作用。

### 用户功能描述
![image](https://github.com/Chloe010/shopMZ/assets/129756356/89eb7e6d-6927-4266-8e4c-3f1d624a117a)

### 系统活动图
![image](https://github.com/Chloe010/shopMZ/assets/129756356/03c52fd1-921c-44f7-825c-f6f60e80932a)

### 系统用例图
![image](https://github.com/Chloe010/shopMZ/assets/129756356/eee8d8a2-e52c-4069-b168-32787cc7e4cb)

### 数据库
![image](https://github.com/Chloe010/shopMZ/assets/129756356/27b0dbbb-26b9-4aca-bba5-d949894e274f)

#### 1、游客
##### 1.1商品爆款主页浏览
###### 首先连接到“selling”数据表（主页显示爆款商品表），根据数据库查询判断并依次显示对应表中查到的每一行商品，while True时，使用div标签小格子每行四个显示爆款商品图片、类别、子类别、价格打折情况等信息。
##### 1.2 商品分页浏览
###### 制作标签，把导航和列表做成标签，读取数据库数据，导航只有五个顶级分类，没有次级分类，使用一系列li标签，在php中用循环读取数据，并且把相应的链接附加上链接数据库，然后读取selling表的分类，为了避免查询的时候再查一次，我们把selling表加上分类的名称，把数据读取出来后用assgin函数把值赋予模版便完成了导航栏。导航栏的链接是标签里形成，提嫁给了一个category方法，并且使用id来识别每个对应的div去显示分页浏览内容。
##### 1.3 详情页查看商品详细
###### 将要做标签的字符串如商品类别、商品名称、商品质地、商品价格等基本信息提取出来，然后用一个标签存储池，查询、读取数据库，提取我们想要的数据，之后要读取三个详情图片，字符串组合好了，调用函数assgin，然后把模版相应部分删除，用标签替代去显示。



#### 2、普通用户
##### 2.1登录、注册功能
###### （1）用户第一次浏览美妆商城时，可以查看商品爆款主页和具体的商品分页浏览内容，但是不能查看和编辑个人资料，也不能够添加商品到购物车进行商品交易等。只有用户登录后才可实现这些被限制的功能。
###### （2）当用户没有账号时，他可以选择注册并登录使用。注册过程中，因为MySQL数据库底层已内置了一个索引，所以我将用户账号设置为唯一标识的字段。若有用户输入相同的账号，系统将提醒用户重新输入账号。当输入密码和确认密码相同即可注册成功！注意,以上所有输入均不为空。
##### 2.2 商品爆款主页浏览
###### 首先连接到“selling”数据表（主页显示爆款商品表），根据数据库查询判断并依次显示对应表中查到的每一行商品，while True时，使用div标签小格子每行四个显示爆款商品图片、类别、子类别、价格打折情况等信息。
##### 2.3 商品分页浏览
###### 制作标签，把导航和列表做成标签，读取数据库数据，导航只有五个顶级分类，没有次级分类，使用一系列li标签，在php中用循环读取数据，并且把相应的链接附加上链接数据库，然后读取selling表的分类，为了避免查询的时候再查一次，我们把selling表加上分类的名称，把数据读取出来后用assgin函数把值赋予模版便完成了导航栏。导航栏的链接是标签里形成，提嫁给了一个category方法，并且使用id来识别每个对应的div去显示分页浏览内容。
##### 2.4 详情页查看商品详细
###### 将要做标签的字符串如商品类别、商品名称、商品质地、商品价格等基本信息提取出来，然后用一个标签存储池，查询、读取数据库，提取我们想要的数据，之后要读取三个详情图片，字符串组合好了，调用函数assgin，然后把模版相应部分删除，用标签替代去显示。
##### 2.5 添加购物车
###### 顾客浏览网站，看中商品后去浏览详细信息，确定意愿后加入购物车，在购物车显示商品列表和结账页面，会出现刚刚点击的商品，可以进行付款，设置导航栏的那个按钮，让所有页面点击那个购物车都能进入这个页面，点击添加以后，我们往buy表插入数据，点击模态框以后发送ajax，执行相应的操作，在接收post，get，cookie数据时，已经用了一个过滤类过滤，这个过滤类，过滤一些直接执行函数eval和数据库语句select，update，delete，ctreate等，可以实现在购物车付款商品、删除商品的功能。
##### 2.6 个人中心
###### 2.6.1个人信息
###### 修改电话号码，修改邮箱，修改密码，修改个人收货地址，修改名称分别去user表内查询对应的信息并使用update更新数据库达到对数据库内容的修改，发送ajax给php 修改，声明post提交，经过服务端验证比较安全，验证通过以后，就修改相应字段。

###### 2.6.2购买列表
![image](https://github.com/Chloe010/shopMZ/assets/129756356/44f2be3f-615b-4304-b590-e7a06606df62)
###### 我们在这个person控制加一个构造函数，这个里面的所有方法都是要登录才能访问，登录用户点击商品，把商品加入购买列表就需要发送ajax给php，要商品id和名称，还有数量，要获取这些buys数据表中值，通过查询数据表，修改数据表的重复操作使商品列表和数据库表同时发生改动，达到购物车的显示效果。


###### 2.6.3账户充值付款详细
###### 通过查询数据表，修改数据表的重复操作使账户充值或消费列表和数据库表同时发生改动，并发送ajax给php完成前端页面和后台操作的同步与显示。
###### 关于付款使用pay函数：首先获取post要付款的商品id，读取这个商品数量，读取单价，并且与数量相乘，得出总价，读取账户最后一条记录的总额，减去商品总价，如果小于零，提示充值；如果大于零，就在account表添加一条新记录，记录这个变化的类型，数额和剩余总额，最后把商品改成已付款。
###### 但目前账户充值涉及到付款安全性和平台注册问题，暂时只在后台数据库做了简单处理，并没有将完善功能体现，具体实现见下图：
![image](https://github.com/Chloe010/shopMZ/assets/129756356/a0f76700-bf7e-49d4-966b-50f45a127a01)


#### 3、管理员
##### 3.1 登录
###### 管理员账户没有注册功能，直接管理员登录，后台依旧使用easyui来做，建立一个login的控制，连接admin（管理员）数据库表进行查询（query）操作，再发送ajax验证登录。
##### 3.2 商品分类管理
###### 左边是树，右边是表格，点击树，会有率属于这个节点分类的一些商品，其中树是可以移动修改的，跟window的文件夹很像。每点击左边的分类，右边就会有属于这个分类的文档，根目录下有6个文档，使用display函数，根据js，获取浏览器类型，然后对用户输出不用的模版，最后我们用mysqli读取数据。
##### 3.3 库存管理
###### 首先要三个按钮，点击按钮要个对话框，新增和修改表单，而删除要确定和取消按钮，在对应的js使用函数对按钮点击事件进行实现，ajax获取选择行的信息，通过查询数据表，修改数据表的重复操作使库存管理页面和数据库表同时发生改动。
##### 3.5 上架管理
###### 与库存管理相似，首先要两个按钮，分别是上架与下架，点击按钮要个对话框，上架与下架要确定和取消按钮，在对应的js使用函数对按钮点击事件进行实现，ajax获取选择行的信息，通过查询数据表，修改数据表的重复操作使库存管理页面和数据库表同时发生改动。
##### 3.6 用户管理
###### 与库存管理相似，首先要三个按钮，分别是冻结、解冻与删除，点击按钮要个对话框，其中删除要确定和取消按钮，在对应的js使用函数对按钮点击事件进行实现，ajax获取选择行的信息，通过查询数据表，修改数据表的重复操作使库存管理页面和数据库表同时发生改动。
##### 3.4 订单管理
###### 与库存管理相同，首先要三个按钮，点击按钮要个对话框，新增和修改表单，而删除要确定和取消按钮，在对应的js使用函数对按钮点击事件进行实现，ajax获取选择行的信息，通过查询数据表，修改数据表的重复操作使库存管理页面和数据库表同时发生改动。
##### 3.7 账户管理
###### 与用户管理相同，首先要三个按钮，分别是加钱、扣钱与删除，点击按钮要个对话框，其中删除要确定和取消按钮，在对应的js使用函数对按钮点击事件进行实现，ajax获取选择行的信息，通过查询数据表，修改数据表的重复操作使库存管理页面和数据库表同时发生改动。


### 用户展示
![image](https://github.com/Chloe010/shopMZ/assets/129756356/a51ba585-33c4-4dbd-888f-bf5cd91f4bb6)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/6007144e-80cf-4933-8d5e-e8389fdeff77)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/dbe7101a-6e59-470a-b1af-7be3ded2c295)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/9b8dff1d-6a7c-446c-863d-f50452fc4121)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/c284138a-99e5-487a-b0df-5767f4d07941)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/0831afee-c6c3-4490-92bf-c4c5a922c2a6)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/db7a1475-4ab0-4c68-8dcb-b2b70b47859d)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/736452d1-502a-4867-bd15-5db028eec134)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/899757d3-5f74-4772-a5f4-8d869b0784ab)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/33c70df9-0796-4df8-9d84-4ef4e5794ff7)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/c6661a83-8370-419d-bb3a-2550187886fe)

### 管理员展示
![image](https://github.com/Chloe010/shopMZ/assets/129756356/2ad9c944-293e-4269-84fd-2ade11b589a9)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/a1072142-c77f-4539-934f-760e7b6c3cc7)

![image](https://github.com/Chloe010/shopMZ/assets/129756356/a5628d81-ee2f-4544-b7d8-981bc53bfa74)

### 总结
###### 项目总体分为普通用户所使用的前台系统，管理员所使用的后台管理系统。该系统用户主要分为三大类：游客用户、普通用户 、系统管理员。针对三类用户所实现的主要功能：普通用户浏览、搜索产品、更新购物车、付款商品；系统管理员进行商品分类属性 spu 与 sku 维护、商品信息发布、商品库存信息 sku 发布、维护用户 信息、订单处理、系统维护。关于模块划分：该系统模块可划分为“用户模块、商品模块、订单模块、购物车模块、积分模块、秒杀模块、评论模块、物流模块、管理员模块”。通过本次项目进行，fighting小组总结出系统设计原则，“先设计，再实现”，实现时先做基本框架，然后层层递进，不过现在小组认为略有偏颇，因为这样做时，前期设计时是完全依靠想象来进行的，没有先写哪怕一点代码，这就造成很多局部的设计与实际情况很不贴切，甚至存在很多遗漏，导致在设计模型时不能充分考虑到需求的细节，比如这次项目中的首页轮播图、商品类展示推荐图、展示到首页的商品类，以及后来的优惠券、退货、售后等模块，它们要么是没有被集成到后台管理界面上，要么是由于数据库设计缺陷导致几乎做不出来，没集成到页面上的就需要在源码里临时添加，很麻烦，而属于数据库缺陷的就只能砍掉，除非对整个项目进行大规模改动。至此，项目圆梦结束。
